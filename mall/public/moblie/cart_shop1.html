<!doctype html>
<html class="no-js">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="description" content="">
		<meta name="keywords" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>购物车</title>

		<!-- Set render engine for 360 browser -->
		<meta name="renderer" content="webkit">

		<!-- No Baidu Siteapp-->
		<meta http-equiv="Cache-Control" content="no-siteapp" />

		<link rel="icon" type="image/png" href="assets/i/favicon.png">

		<!-- Add to homescreen for Chrome on Android -->
		<meta name="mobile-web-app-capable" content="yes">
		<link rel="icon" sizes="192x192" href="assets/i/app-icon72x72@2x.png">

		<!-- Add to homescreen for Safari on iOS -->
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-title" content="Amaze UI" />
		<link rel="apple-touch-icon-precomposed" href="assets/i/app-icon72x72@2x.png">

		<!-- Tile icon for Win8 (144x144 + tile color) -->
		<meta name="msapplication-TileImage" content="assets/i/app-icon72x72@2x.png">
		<meta name="msapplication-TileColor" content="#0e90d2">

		<link rel="stylesheet" href="assets/css/amazeui.min.css">
		<link rel="stylesheet" href="assets/css/app.css">

		<!--css样式-->
		<link rel="stylesheet" type="text/css" href="css/cart_shop.css" />
	</head>

	<body>

		<div class="max_box">

			<!--页头-->
			<header data-am-widget="header" class="am-header am-header-default">
				<div class="am-header-title">
					<a href="#title-link" class="ever">
						购物车
						<!--<span>(3)</span>-->
					</a>
				</div>

				<div class="am-header-right am-header-nav">
					<a href="index.html" class="home"></a>
					<a href="user_center.html" class="self"></a>
				</div>
			</header>

			<!--自营保税仓-->
			<div class="bonded">
				<div class="self_top am-cf">
					<div class="selected am-fl">
						<label for=""></label>
						<input type="checkbox" name="goods1" id="" value="" />
					</div>
					<div class="scalping am-fl">
						<img src="img/scalping.png" />
						<span>自营保税仓</span>
					</div>
				</div>

				<!--商品-->
				<div class="goodss">
					<div class="lists">
						<a href="#">
							<div class="lists_top am-cf">
								<div class="lists_top_a am-fl">
									<span>满额减</span>
								</div>
								<div class="lists_top_b am-fl">
									再购<b>61</b>元立享【满159元减30元】
								</div>
								<div class="lists_top_c am-fl"></div>
							</div>
						</a>
						<div class="lists_goods am-cf">
							<div class="selected selected1 am-fl">
								<label for=""></label>
								<input type="checkbox" name="goods" id="" value="" />
							</div>
							<div class="lists_goods_p am-fl am-cf">
								<div class="lists_goods_a_img am-fl">
									<img src="img/car_shop_goods1.jpg" />
								</div>
								<div class="lists_goods_n am-fl">
									<div class="lists_goods_n1">
										<span>特价</span>Ryoe 吕 黄吕 防脱固发滋养洗发水 500毫升 2瓶装
									</div>
									<div class="lists_goods_n2 am-cf">
										<div class="lists_goods_abc am-fl">
											<p class="tax">预估税费 ¥<span>11.66</span></p>
											<p class="tax_pr">¥88.00</p>
										</div>
										<div class="lists_goods_abc1 am-fr am-cf">
											<div class="add_min">
												<div class="am-input-group">
													<span class="am-input-group-label minus">-</span>
													<input type="number" class="am-form-field" value="1" disabled>
													<span class="am-input-group-label add">+</span>
												</div>
											</div>
											<div class="rubbish am-fr">
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="lists">
						<a href="#">
							<div class="lists_top am-cf">
								<div class="lists_top_a am-fl">
									<span>满额减</span>
								</div>
								<div class="lists_top_b am-fl">
									再购<b>61</b>元立享【满159元减30元】
								</div>
								<div class="lists_top_c am-fl"></div>
							</div>
						</a>
						<div class="lists_goods am-cf">
							<div class="selected selected1 am-fl">
								<label for=""></label>
								<input type="checkbox" name="goods" id="" value="" />
							</div>
							<div class="lists_goods_p am-fl am-cf">
								<div class="lists_goods_a_img am-fl">
									<img src="img/car_shop_goods1.jpg" />
								</div>
								<div class="lists_goods_n am-fl">
									<div class="lists_goods_n1">
										<span>特价</span>Ryoe 吕 黄吕 防脱固发滋养洗发水 500毫升 2瓶装
									</div>
									<div class="lists_goods_n2 am-cf">
										<div class="lists_goods_abc am-fl">
											<p class="tax">预估税费 ¥<span>11.66</span></p>
											<p class="tax_pr">¥88.00</p>
										</div>
										<div class="lists_goods_abc1 am-fr am-cf">
											<div class="add_min">
												<div class="am-input-group">
													<span class="am-input-group-label minus">-</span>
													<input type="number" class="am-form-field" value="1" disabled>
													<span class="am-input-group-label add">+</span>
												</div>
											</div>
											<div class="rubbish am-fr">
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!--价格-->
				<!--<div class="total1 am-cf">
					<div class="total1_active am-fr">
						活动优惠：<span>-¥0.00</span>
					</div>
					<br />
					<div class="total1_sum am-fr">
						本仓总计（不含税）：<span>¥0.00</span>
					</div>
				</div>-->
			</div>

			<!--自营国内仓-->
			<!--<div class="inland">
				<div class="self_top am-cf">
					<div class="selected am-fl">
						<label for=""></label>
						<input type="checkbox" name="goods" id="" value="" />
					</div>
					<div class="scalping am-fl">
						<img src="img/scalping.png" />
						<span>自营国内仓</span>
					</div>
				</div>

				<div class="lists">
					<a href="#">
						<div class="lists_top am-cf">
							<div class="lists_top_a am-fl">
								<span>满额减</span>
							</div>
							<div class="lists_top_b am-fl">
								再购<b>61</b>元立享【满159元减30元】
							</div>
							<div class="lists_top_c am-fl"></div>
						</div>
					</a>
					<div class="lists_goods am-cf">
						<div class="selected selected1 am-fl">
							<label for=""></label>
							<input type="checkbox" name="goods" id="" value="" />
						</div>
						<div class="lists_goods_p am-fl am-cf">
							<div class="lists_goods_a_img am-fl">
								<img src="img/car_shop_goods1.jpg" />
							</div>
							<div class="lists_goods_n am-fl">
								<div class="lists_goods_n1">
									<span>特价</span>Ryoe 吕 黄吕 防脱固发滋养洗发水 500毫升 2瓶装
								</div>
								<div class="lists_goods_n2 am-cf">
									<div class="lists_goods_abc am-fl">
										<p class="tax">预估税费 ¥<span>11.66</span></p>
										<p class="tax_pr">¥88.00</p>
									</div>
									<div class="lists_goods_abc1 am-fr am-cf">
										<div class="add_min">
											<div class="am-input-group">
												<span class="am-input-group-label minus">-</span>
												<input type="number" class="am-form-field" value="1" disabled>
												<span class="am-input-group-label add">+</span>
											</div>
										</div>
										<div class="rubbish am-fr">
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>-->

			<!--价格-->
			<!--<div class="total1 am-cf">
					<div class="total1_active am-fr">
						活动优惠：<span>-¥0.00</span>
					</div>
					<br />
					<div class="total1_sum am-fr">
						本仓总计（不含税）：<span>¥0.00</span>
					</div>
				</div>
			</div>-->
		</div>

		<!--总价-->
		<div class="total am-cf">
			<div class="selected selected1 select_p am-fl">
				<label for="" id="all_check"></label>
				<input type="checkbox" name="" id="" value="" />
			</div>
			<div class="all_select_w am-fl">
				全选
			</div>
			<div class="total_sum am-fr">
				<a href="submit_order.html">结算</a>
			</div>
			<div class="total_price am-fr">
				<div class="total_price1">
					总价（不含税）：<span>¥0.00</span>
				</div>
				<div class="total_price2">
					预估税费：<span>¥0.00</span>
				</div>
			</div>
		</div>

		<!--[if (gte IE 9)|!(IE)]><!-->
		<script src="js/jquery-3.2.1.min.js" type="text/javascript" charset="utf-8"></script>
		<!--<![endif]-->
		<!--[if lte IE 8 ]>
<script src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
<script src="assets/js/amazeui.ie8polyfill.min.js"></script>
<![endif]-->
		<script src="assets/js/amazeui.min.js"></script>
		<script type="text/javascript">
			$(document).ready(function() {
				var oGoods = $(".bonded input[name='goods']");
				var oGoods1 = $(".bonded input[name='goods1']");
				var oAll = $("#all_check").siblings("input");

				var flag = 0;

				//单个选择
				$(".bonded input[name='goods']").siblings('label').click(function() {

					if($(this).siblings("input:checked").length) {
						flag = 1;
						//$('label').removeAttr('class');
						$(this).removeAttr('class');
						//$(".selected input").removeAttr('checked');
						$(this).siblings("input").removeAttr('checked');
						cal();
					} else {
						flag = 0;
						//$('label').removeAttr('class');
						$(this).attr('class', 'checked');
						//$(".selected input").removeAttr('checked');
						$(this).siblings("input").attr('checked', 'checked');
						cal();
					}

					//复选
					if(isAll()) {
						$("#all_check").attr('class', 'checked');
						$("#all_check").siblings("input").attr('checked', 'checked');
						oGoods1.siblings("label").attr('class', 'checked');
						oGoods1.attr('checked', 'checked');
					} else {
						$("#all_check").removeAttr('class');
						$("#all_check").siblings("input").removeAttr('checked');
						oGoods1.siblings("label").removeAttr('class');
						oGoods1.removeAttr('checked');
					}
				});

				//判断全选
				function isAll() {
					var all = oGoods.length;
					if($("input[name='goods']:checked").length == all) {
						return true;
					} else {
						return false;
					}
				}

				//自营全选
				var b = 0;
				$("input[name='goods1']").siblings("label").click(function() {
					if(b == 0) {
						b = 1;
						//$('label').removeAttr('class');
						$(this).attr('class', 'checked');
						$("input[name='goods']").siblings("label").attr('class', 'checked');
						//$(".selected input").removeAttr('checked');
						$(this).siblings("input").attr('checked', 'checked');
						$("input[name='goods']").attr('checked', 'checked');
						cal();

						//oGoods.prop("checked", this.checked);
					} else {
						b = 0;
						$(this).removeAttr('class');
						$("input[name='goods']").siblings("label").removeAttr('class');
						//$('label').attr('class', 'checked');
						//$(".selected input").removeAttr('checked');
						$("input[name='goods']").removeAttr('checked');
						$(this).siblings("input").removeAttr('checked');
						cal();

						//oGoods.prop("checked", this.checked);
					}

					if(isAll()) {
						$("#all_check").attr('class', 'checked');
						$("#all_check").siblings("input").attr('checked', 'checked');
						oGoods1.siblings("label").attr('class', 'checked');
						oGoods1.attr('checked', 'checked');
					} else {
						$("#all_check").removeAttr('class');
						$("#all_check").siblings("input").removeAttr('checked');
						oGoods1.siblings("label").removeAttr('class');
						oGoods1.removeAttr('checked');
					}

					//					if($("#all_check").siblings("input:checked").length){
					//						$(this).removeAttr('class');
					//						$("input[name='goods']").siblings("label").removeAttr('class');
					//						//$('label').attr('class', 'checked');
					//						//$(".selected input").removeAttr('checked');
					//						$("input[name='goods']").removeAttr('checked');
					//						$(this).siblings("input").removeAttr('checked');
					//						$("#all_check").removeAttr('class');
					//						$("#all_check").siblings("input").removeAttr('checked');
					//					}else{
					//						$(this).attr('class', 'checked');
					//						$("input[name='goods']").siblings("label").attr('class', 'checked');
					//						//$('label').attr('class', 'checked');
					//						//$(".selected input").removeAttr('checked');
					//						$("input[name='goods']").attr('checked', 'checked');
					//						$(this).siblings("input").attr('checked', 'checked');
					//						$("#all_check").attr('class', 'checked');
					//						$("#all_check").siblings("input").attr('checked', 'checked');
					//					}
				});

				//全选
				var a = 0;

				$("#all_check").click(function() {
					if(a == 0) {
						a = 1;
						//$('label').removeAttr('class');
						$('label').attr('class', 'checked');
						//$(".selected input").removeAttr('checked');
						$("input").attr('checked', 'checked');
						cal();
						//oGoods.prop("checked", this.checked);
					} else {
						a = 0;

						$('label').removeAttr('class');
						//$('label').attr('class', 'checked');
						//$(".selected input").removeAttr('checked');
						$("input").removeAttr('checked');
						cal();
						//oGoods.prop("checked", this.checked);
					}

					//					if($("input[name='goods1']").length){
					//						$(this).removeAttr('class');
					//						$("input[name='goods']").siblings("label").removeAttr('class');
					//						//$('label').attr('class', 'checked');
					//						//$(".selected input").removeAttr('checked');
					//						$("input[name='goods']").removeAttr('checked');
					//						$(this).siblings("input").removeAttr('checked');
					//						$("#all_check").removeAttr('class');
					//						$("#all_check").siblings("input").removeAttr('checked');
					//					}
				});

				//计算总价
				function cal() {
					var arr = [];
					var total = 0;
					//取出span的text
					var price = $("input[name='goods']:checked").parents(".lists_goods").find(".tax_pr").text();
					//切割字符串
					console.log(price)
					var arr = price.split("¥");
					//数组第一个为空 删除
					console.log(arr);
					//计算总计
					for(var i = 1; i < arr.length; i++) {
						total += parseInt(arr[i]);
					}
					console.log(total)
					$(".total").find(".total_price1 span").text("¥" + total.toFixed(2));
				}

				//单价
				var p = $(".tax_pr").text();
				var arr1 = p.split("¥");

				//数量加减
				$(".minus").click(function() {
					var a = $(this).siblings("input").val();
					if(a > 1) {
						a--;
						$(this).siblings("input").val(a);
					} else {
						return;
					}
					var p1 = arr1[1] * a;
					$(this).parents(".lists").find(".tax_pr").text("¥" + p1.toFixed(2));
					cal();
				});

				$(".add").click(function() {
					var b = $(this).siblings("input").val();
					b++;
					$(this).siblings("input").val(b);

					var p1 = arr1[1] * b;
					$(this).parents(".lists").find(".tax_pr").text("¥" + p1.toFixed(2));
					cal();
				});

				//删除
				$(".rubbish").click(function() {
					$(this).parents(".lists").remove();

					console.log($(".lists").length)
					if($(".lists").length == 0) {
						$(".bonded").remove();
					}
				})

			})
		</script>
	</body>

</html>